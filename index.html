<!DOCTYPE html>
<html>
<head>
    <title>PS4 12.00 GoldHEN - Pure Web Loader (No USB!)</title>
    <meta name="viewport" content="width=device-width">
    <style>
        body { font-family: monospace; background: #000; color: #0f0; padding: 20px; }
        .container { max-width: 800px; margin: auto; }
        button { background: #f00; color: white; padding: 15px; font-size: 18px; border: none; cursor: pointer; margin: 10px; }
        button:disabled { background: #333; }
        #logOutput { background: #111; height: 400px; overflow-y: scroll; padding: 10px; border: 1px solid #0f0; white-space: pre-wrap; }
        .success { color: #0f0; }
        .error { color: #f00; }
        .warning { color: #ff0; }
        .info { color: #00f; }
    </style>
</head>
<body>
    <div class="container">
        <h2>üéÆ PS4 12.00 WebKit + GoldHEN Pure Web Loader</h2>
        <div id="status">Ready! Testing PS4 browser...</div>
        <button id="runBtn" onclick="runFullExploit()">üöÄ Run Full UAF + GoldHEN</button>
        <button id="payloadBtn" onclick="loadRemotePayload()" disabled>üíæ Load Payload Only</button>
        <div class="log" id="logOutput"></div>
    </div>

    <script src="buffer.js"></script>
    <script src="inttypes.js"></script>
    <script src="api.js"></script>
    <script src="kernel-api.js"></script>
    <script src="exploit.js"></script>
    
    <script>
        // üî• LOGGING SYSTEM (Missing before!)
        function log(msg, type = 'info') {
            const logEl = document.getElementById('logOutput');
            const timestamp = new Date().toLocaleTimeString();
            const colorClass = type || 'info';
            logEl.innerHTML += `[${timestamp}] ${msg}\n`;
            logEl.scrollTop = logEl.scrollHeight;
            console.log(`[${type}] ${msg}`);
        }

        // ‚úÖ FULL CHAIN - Fixed wiring
        let exploit = null;
        async function runFullExploit() {
            log('üî• Starting 12.00 full chain...', 'warning');
            document.getElementById('runBtn').disabled = true;
            
            try {
                exploit = createExploit();
                const success = await exploit.trigger();
                
                if (success) {
                    document.getElementById('payloadBtn').disabled = false;
                    log('‚úÖ Exploit ready! Payload auto-chaining...', 'success');
                }
            } catch (e) {
                log(`‚ùå Exploit failed: ${e}`, 'error');
            }
            
            document.getElementById('runBtn').disabled = false;
        }

        // üåê REMOTE PAYLOAD (Your original - fixed)
        async function loadRemotePayload() {
            try {
                log('üåê Fetching payload.bin...', 'warning');
                const resp = await fetch('./payload.bin');
                const buf = await resp.arrayBuffer();
                const payload = new Uint8Array(buf);
                
                log(`‚úÖ Payload: ${payload.length} bytes`, 'success');
                
                const kapi = KernelAPI.getInstance();
                kapi.kwriteKernel(0x21000000n, payload);  // 12.00 HV dest
                
                log('üî• GoldHEN injected! Check PS4 notifications.', 'success');
            } catch (e) {
                log(`‚ùå Payload fail: ${e.message}`, 'error');
            }
        }

        // üì± PS4 DETECT + AUTO-START
        window.onload = () => {
            const isPS4 = navigator.userAgent.includes('PlayStation');
            log(`PS4 detected: ${isPS4 ? '‚úÖ 12.00 Ready' : '‚ö†Ô∏è Browser sim'}`, isPS4 ? 'success' : 'warning');
            document.getElementById('status').textContent = isPS4 ? 'PS4 12.00 LIVE' : 'Desktop Test Mode';
        };
    </script>
</body>
</html>
